{
  "last_node_id": 10,
  "last_link_id": 12,
  "nodes": [
    {
      "id": 1,
      "type": "LoadImage",
      "pos": [50, 50],
      "size": {"0": 315, "1": 314},
      "flags": {},
      "order": 0,
      "mode": 0,
      "outputs": [
        {"name": "IMAGE", "type": "IMAGE", "links": [1, 2, 3], "slot_index": 0},
        {"name": "MASK", "type": "MASK", "links": null}
      ],
      "properties": {"Node name for S&R": "LoadImage"},
      "widgets_values": ["360_panorama.jpg"],
      "title": "üåê Load 360¬∞ Panorama"
    },
    {
      "id": 2,
      "type": "OWLViT_Detect_360",
      "pos": [400, 50],
      "size": {"0": 315, "1": 246},
      "flags": {},
      "order": 1,
      "mode": 0,
      "inputs": [
        {"name": "erp_image", "type": "IMAGE", "link": 1}
      ],
      "outputs": [
        {"name": "detection_boxes", "type": "DETECTION_BOXES", "links": [4], "slot_index": 0},
        {"name": "detection_preview", "type": "IMAGE", "links": [5], "slot_index": 1},
        {"name": "detection_summary", "type": "STRING", "links": [6]}
      ],
      "properties": {"Node name for S&R": "OWLViT_Detect_360"},
      "widgets_values": ["mountain peak, rock formation, tree, large boulder, cliff, building", 0.01, 0.5, "circular_padding", 30, "base"],
      "title": "üéØ OWL-ViT 360¬∞ Object Detector"
    },
    {
      "id": 3,
      "type": "Boxes_To_ZIM_Mattes",
      "pos": [750, 50],
      "size": {"0": 315, "1": 186},
      "flags": {},
      "order": 2,
      "mode": 0,
      "inputs": [
        {"name": "erp_image", "type": "IMAGE", "link": 2},
        {"name": "detection_boxes", "type": "DETECTION_BOXES", "link": 4}
      ],
      "outputs": [
        {"name": "object_masks", "type": "IMAGE", "links": [7], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "Boxes_To_ZIM_Mattes"},
      "widgets_values": ["grabcut", 1.3, 3.0, 50, 5, 10],
      "title": "üé≠ Detection Boxes ‚Üí Object Masks"
    },
    {
      "id": 4,
      "type": "Sky_Background_Splitter",
      "pos": [1100, 50],
      "size": {"0": 315, "1": 186},
      "flags": {},
      "order": 3,
      "mode": 0,
      "inputs": [
        {"name": "erp_image", "type": "IMAGE", "link": 3}
      ],
      "outputs": [
        {"name": "sky_mask", "type": "IMAGE", "links": [8], "slot_index": 0},
        {"name": "background_mask", "type": "IMAGE", "links": [9], "slot_index": 1},
        {"name": "combined_preview", "type": "IMAGE", "links": [10]}
      ],
      "properties": {"Node name for S&R": "Sky_Background_Splitter"},
      "widgets_values": ["auto", 0.3, 0.0, 0.03, 0.4],
      "title": "üåÖ Sky/Background Splitter"
    },
    {
      "id": 5,
      "type": "Detection_Mask_Combiner",
      "pos": [1450, 50],
      "size": {"0": 315, "1": 146},
      "flags": {},
      "order": 4,
      "mode": 0,
      "inputs": [
        {"name": "object_masks", "type": "IMAGE", "link": 7},
        {"name": "sky_mask", "type": "IMAGE", "link": 8},
        {"name": "background_mask", "type": "IMAGE", "link": 9}
      ],
      "outputs": [
        {"name": "combined_sky", "type": "IMAGE", "links": [11], "slot_index": 0},
        {"name": "combined_background", "type": "IMAGE", "links": [12], "slot_index": 1},
        {"name": "combined_objects", "type": "IMAGE", "links": null}
      ],
      "properties": {"Node name for S&R": "Detection_Mask_Combiner"},
      "widgets_values": ["priority", 1.0],
      "title": "üîó Combine Object/Sky/Background"
    },
    {
      "id": 6,
      "type": "PreviewImage",
      "pos": [400, 350],
      "size": {"0": 315, "1": 246},
      "flags": {},
      "order": 5,
      "mode": 0,
      "inputs": [
        {"name": "images", "type": "IMAGE", "link": 5}
      ],
      "properties": {"Node name for S&R": "PreviewImage"},
      "title": "üéØ Detection Preview"
    },
    {
      "id": 7,
      "type": "PreviewImage",
      "pos": [750, 350],
      "size": {"0": 315, "1": 246},
      "flags": {},
      "order": 6,
      "mode": 0,
      "inputs": [
        {"name": "images", "type": "IMAGE", "link": 7}
      ],
      "properties": {"Node name for S&R": "PreviewImage"},
      "title": "üé≠ Object Masks Preview"
    },
    {
      "id": 8,
      "type": "PreviewImage",
      "pos": [1100, 350],
      "size": {"0": 315, "1": 246},
      "flags": {},
      "order": 7,
      "mode": 0,
      "inputs": [
        {"name": "images", "type": "IMAGE", "link": 10}
      ],
      "properties": {"Node name for S&R": "PreviewImage"},
      "title": "üåÖ Sky/Background Preview"
    },
    {
      "id": 9,
      "type": "PreviewImage",
      "pos": [1450, 350],
      "size": {"0": 315, "1": 246},
      "flags": {},
      "order": 8,
      "mode": 0,
      "inputs": [
        {"name": "images", "type": "IMAGE", "link": 11}
      ],
      "properties": {"Node name for S&R": "PreviewImage"},
      "title": "üîó Combined Sky Preview"
    },
    {
      "id": 10,
      "type": "ShowText|pysssss",
      "pos": [50, 650],
      "size": {"0": 1715, "1": 76},
      "flags": {},
      "order": 9,
      "mode": 0,
      "inputs": [
        {"name": "text", "type": "STRING", "link": 6}
      ],
      "properties": {"Node name for S&R": "ShowText|pysssss"},
      "title": "üìÑ Detection Summary"
    },
    {
      "id": 11,
      "type": "Note",
      "pos": [50, 750],
      "size": {"0": 1715, "1": 150},
      "flags": {},
      "order": 10,
      "mode": 0,
      "properties": {"Node name for S&R": "Note"},
      "widgets_values": ["üéØ DETECTION PIPELINE TEST WORKFLOW\n\nThis workflow focuses on testing the new object detection and masking capabilities:\n\nüîÑ Pipeline Flow: Input Panorama ‚Üí OWL-ViT Detection ‚Üí Box-to-Mask Conversion ‚Üí Sky/Background Split ‚Üí Mask Combination\n\n‚öôÔ∏è Tuning Tips:\n‚Ä¢ Adjust 'confidence_threshold' (0.01-0.1) to control detection sensitivity - OWL-ViT outputs low confidence scores\n‚Ä¢ Try different text queries: 'rocky outcrop, cliff face, prominent peak, large tree, stone formation'\n‚Ä¢ 'circular_padding' mode handles objects crossing the ¬±180¬∞ seam best\n‚Ä¢ 'perspective_tiles' mode is more thorough but slower\n‚Ä¢ Increase 'mask_expansion' (1.2-1.5) for larger object masks\n‚Ä¢ Adjust 'edge_feather' (2-5) for smoother mask boundaries\n\nüìä Expected Results: Detection boxes ‚Üí Clean object masks ‚Üí Properly separated sky/background/objects ready for layered processing"],
      "title": "üéØ Detection Pipeline Info",
      "color": "#232",
      "bgcolor": "#353"
    }
  ],
  "links": [
    [1, 1, 0, 2, 0, "IMAGE"],
    [2, 1, 0, 3, 0, "IMAGE"],
    [3, 1, 0, 4, 0, "IMAGE"],
    [4, 2, 0, 3, 1, "DETECTION_BOXES"],
    [5, 2, 1, 6, 0, "IMAGE"],
    [6, 2, 2, 10, 0, "STRING"],
    [7, 3, 0, 5, 0, "IMAGE"],
    [7, 3, 0, 7, 0, "IMAGE"],
    [8, 4, 0, 5, 1, "IMAGE"],
    [9, 4, 1, 5, 2, "IMAGE"],
    [10, 4, 2, 8, 0, "IMAGE"],
    [11, 5, 0, 9, 0, "IMAGE"],
    [12, 5, 1, 9, 0, "IMAGE"]
  ],
  "groups": [
    {
      "title": "üéØ Object Detection Pipeline",
      "bounding": [25, 25, 1765, 275],
      "color": "#a1309b"
    },
    {
      "title": "üëÅÔ∏è Preview Results",
      "bounding": [375, 325, 1415, 300],
      "color": "#88a"
    },
    {
      "title": "üìÑ Output & Documentation",
      "bounding": [25, 625, 1765, 300],
      "color": "#666"
    }
  ],
  "config": {},
  "extra": {},
  "version": 0.4
}